---
import { getCollection } from "astro:content";
import BlogCard from "./BlogCard.astro";

const blogEntries = await getCollection("blog");

// Sort by publish date, most recent first
const sortedPosts = blogEntries.sort(
  (a, b) => b.data.publishDate.getTime() - a.data.publishDate.getTime()
);

---

<section id="blog" class="py-20 px-4 bg-base-300">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold mb-4">CTF Writeups</h2>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {sortedPosts.map((post) => <BlogCard post={post} />)}
    </div>

    <div class="text-center mt-12">
      <a href="/blog" class="btn btn-primary">View All Posts</a>
    </div>
  </div>
</section>
